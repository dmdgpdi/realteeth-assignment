# ÌÖåÏä§Ìä∏ Í∞ÄÏù¥Îìú (Testing Strategy)

Ïù¥ ÌîÑÎ°úÏ†ùÌä∏Îäî **Classist (Detroit School / Classic)** ÌÖåÏä§Ìä∏ Ï≤†ÌïôÏùÑ Îî∞Î¶ÖÎãàÎã§.
ÌÖåÏä§Ìä∏Ïùò Î™©Ï†ÅÏùÄ **"ÏΩîÎìúÍ∞Ä Ïñ¥ÎñªÍ≤å Íµ¨ÌòÑÎêòÏóàÎäîÍ∞Ä"**Í∞Ä ÏïÑÎãàÎùº **"ÏΩîÎìúÍ∞Ä Î¨¥ÏóáÏùÑ ÏàòÌñâÌïòÎäîÍ∞Ä"**Î•º Í≤ÄÏ¶ùÌïòÎäî Í≤ÉÏûÖÎãàÎã§.

---

## üèõ ÌïµÏã¨ Ï≤†Ìïô: Classist

### 1. ÏÉÅÌÉúÏôÄ ÌñâÏúÑ Í≤ÄÏ¶ù (Verify State & Behavior)
Ïö∞Î¶¨Îäî Í∞ùÏ≤¥ÎÇò Ìï®ÏàòÍ∞Ä ÎÇ¥Î∂ÄÏ†ÅÏúºÎ°ú ÎàÑÍµ¨ÏôÄ ÌòëÎ†•ÌïòÎäîÏßÄ(Interaction)ÏóêÎäî Í¥ÄÏã¨Ïù¥ ÏóÜÏäµÎãàÎã§. Ïò§ÏßÅ **ÏûÖÎ†•(Input)**Ïóê ÎåÄÌï¥ Ïñ¥Îñ§ **Í≤∞Í≥º(Output)**Í∞Ä ÎÇòÏò§ÎäîÏßÄ, ÎòêÎäî ÏãúÏä§ÌÖúÏùò **ÏÉÅÌÉú(State)**Í∞Ä Ïñ¥ÎñªÍ≤å Î≥ÄÌñàÎäîÏßÄÎßåÏùÑ Í≤ÄÏ¶ùÌï©ÎãàÎã§.

### 2. Ïã§Ï†ú ÌòëÎ†• Í∞ùÏ≤¥ ÏÇ¨Ïö© (Real Collaborators)
Í∞ÄÎä•ÌïòÎã§Î©¥ Ïã§Ï†ú Í∞ùÏ≤¥Î•º Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî.
- `User` Í∞ùÏ≤¥Î•º ÌÖåÏä§Ìä∏ÌïòÍ∏∞ ÏúÑÌï¥ `User`Î•º Mocking ÌïòÏßÄ ÎßàÏÑ∏Ïöî. `new User()`Î•º Ìï¥ÏÑú ÏßÑÏßúÎ•º Ïì∞ÏÑ∏Ïöî.
- **Î™®ÌÇπ(Mocking)ÏùÄ ÏµúÌõÑÏùò ÏàòÎã®**ÏûÖÎãàÎã§. Ï†úÏñ¥Ìï† Ïàò ÏóÜÎäî Ïô∏Î∂Ä ÏöîÏÜå(ÎÑ§Ìä∏ÏõåÌÅ¨, Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§, ÏãúÍ∞Ñ Îì±)Î•º Í≤©Î¶¨Ìï† ÎïåÎßå ÏÇ¨Ïö©Ìï©ÎãàÎã§.
- **Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨(Repository)Îäî ÏßÅÏ†ë ÌÖåÏä§Ìä∏ÌïòÏßÄ ÏïäÏäµÎãàÎã§.** Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Îäî Îã®ÏàúÌïú Îç∞Ïù¥ÌÑ∞ I/OÎ•º Îã¥ÎãπÌïòÎØÄÎ°ú, Ïù¥Î•º ÏÇ¨Ïö©ÌïòÎäî Ïú†Ïä§ÏºÄÏù¥Ïä§ÎÇò Í¥ÄÎ†® Î°úÏßÅÏùÑ ÌÜµÌï¥ Í∞ÑÏ†ëÏ†ÅÏúºÎ°ú Í≤ÄÏ¶ùÌïòÎäî Í≤ÉÏúºÎ°ú Ï∂©Î∂ÑÌï©ÎãàÎã§.

---

## üö´ Mockist (London School) - ÏßÄÏñëÌïòÎäî Î∞©Ïãù
Íµ¨ÌòÑ ÎîîÌÖåÏùºÏùÑ ÌÖåÏä§Ìä∏ÌïòÏßÄ ÎßàÏÑ∏Ïöî. Ïù¥Îäî Î¶¨Ìå©ÌÜ†ÎßÅÏùÑ Î∞©Ìï¥Ìï©ÎãàÎã§.

### ‚ùå ÎÇòÏÅú Ïòà: ÎÇ¥Î∂Ä Íµ¨ÌòÑ Í∞êÏãú
```typescript
it("ÌöåÏõêÍ∞ÄÏûÖ Ïãú Ï†ÄÏû• Ìï®ÏàòÍ∞Ä Ìò∏Ï∂úÎêòÏñ¥Ïïº ÌïúÎã§", () => {
  const mockRepo = { save: jest.fn() }; // Í∞ÄÏßú Í∞ùÏ≤¥Ïóê Ïä§ÌååÏù¥Î•º Ïã¨Ïùå
  const service = new AuthService(mockRepo);

  service.signup("test@email.com");

  // "Ï†ÄÏû• Ìï®ÏàòÍ∞Ä Ìò∏Ï∂úÎêòÏóàÎäîÍ∞Ä?"Î•º Í≤ÄÏÇ¨Ìï®.
  // ÎßåÏïΩ Íµ¨ÌòÑÏù¥ save()Í∞Ä ÏïÑÎãàÎùº create()Î•º Ïì∞ÎèÑÎ°ù Î∞îÎÄåÎ©¥, ÎèôÏûëÏùÄ Í∞ôÏïÑÎèÑ ÌÖåÏä§Ìä∏Îäî Íπ®Ïßê.
  expect(mockRepo.save).toHaveBeenCalledWith("test@email.com"); 
});
```

---

## ‚úÖ Classist (Detroit School) - ÏßÄÌñ•ÌïòÎäî Î∞©Ïãù
ÏãúÏä§ÌÖúÏùò ÏµúÏ¢Ö ÏÉÅÌÉúÎ•º Í≤ÄÏ¶ùÌïòÏÑ∏Ïöî. Ïù¥Îäî Î¶¨Ìå©ÌÜ†ÎßÅÏóê Í∞ïÌï©ÎãàÎã§.

### ‚≠ï Ï¢ãÏùÄ Ïòà: Í≤∞Í≥º ÏÉÅÌÉú Í≤ÄÏ¶ù
```typescript
it("ÌöåÏõêÍ∞ÄÏûÖ Ïãú Ïú†Ï†ÄÍ∞Ä Ï°∞Ìöå Í∞ÄÎä•Ìï¥Ïïº ÌïúÎã§", async () => {
  // Fake(Ïù∏Î©îÎ™®Î¶¨ Îì±)Îäî 'Í∏∞Ïà†'Ïùº ÎøêÏûÖÎãàÎã§. ÌïµÏã¨ÏùÄ 'ÏÉÅÌÉú Í≤ÄÏ¶ù'ÏûÖÎãàÎã§.
  const userRepo = new InMemoryUserRepository(); 
  const service = new AuthService(userRepo);

  await service.signup("test@email.com");

  // "Ï†ÄÏû•Ïù¥ Ïã§Ï†úÎ°ú ÎêòÏóàÎäîÍ∞Ä?"Î•º Í≤ÄÏÇ¨Ìï®.
  // ÎÇ¥Î∂Ä Íµ¨ÌòÑÏù¥ Î∞îÎÄåÏñ¥ÎèÑ Í≤∞Í≥ºÍ∞Ä Í∞ôÎã§Î©¥ ÌÖåÏä§Ìä∏Îäî ÌÜµÍ≥ºÌï®.
  const user = await userRepo.findByEmail("test@email.com");
  expect(user).not.toBeNull();
  expect(user.email).toBe("test@email.com");
});
```

---

## üí° Ïã§Ï≤ú Í∞ÄÏù¥Îìú

1.  **Î∏îÎûôÎ∞ïÏä§ ÌÖåÏä§Ìä∏**: ÌÖåÏä§Ìä∏ ÎåÄÏÉÅÏùò ÎÇ¥Î∂Ä(`private` Î©îÏÑúÎìú, ÎÇ¥Î∂Ä Î≥ÄÏàò)Î•º Îì§Ïó¨Îã§Î≥¥ÏßÄ ÎßàÏÑ∏Ïöî. Í≥µÍ∞úÎêú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§(`public` method)Îßå ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî.
2.  **Î™®ÌÇπ ÏµúÏÜåÌôî**: `jest.mock()`Ïù¥ÎÇò `spyOn`Ïù¥ ÏΩîÎìúÏóê ÎßéÎã§Î©¥ ÏùòÏã¨Ìï¥Î≥¥ÏÑ∏Ïöî. "Ïù¥Í≤å Ï†ïÎßê Ïô∏Î∂Ä I/OÎùºÏÑú Î™®ÌÇπÌïòÎäî Í±¥Í∞Ä? ÏïÑÎãàÎ©¥ Í∑∏ÎÉ• Ìé∏ÌïòÎ†§Í≥† Î™®ÌÇπÌïòÎäî Í±¥Í∞Ä?"
3.  **ÏÇ¨ÌöåÏ†ÅÏù∏ Îã®ÏúÑ ÌÖåÏä§Ìä∏ (Sociable Unit Tests)**: ÌÅ¥ÎûòÏä§ ÌïòÎÇòÎßå Í≥†Î¶ΩÏãúÌÇ§ÏßÄ ÎßêÍ≥†, Ïó∞Í¥ÄÎêú ÌÅ¥ÎûòÏä§Îì§Ïù¥ Ìï®Íªò Ïûò ÎèôÏûëÌïòÎäîÏßÄ Î¨∂Ïñ¥ÏÑú ÌÖåÏä§Ìä∏ÌïòÏÑ∏Ïöî.
4.  **Ïñ∏Ïñ¥ Í∑úÏπô (Language)**: Î™®Îì† Ï£ºÏÑù(Comment)Í≥º ÌÖåÏä§Ìä∏ ÏÑ§Î™Ö(Description)ÏùÄ Î∞òÎìúÏãú **ÌïúÍµ≠Ïñ¥**Î°ú ÏûëÏÑ±ÌïòÏÑ∏Ïöî.

---

## üèó ÌÖåÏä§Ìä∏ Íµ¨Ï°∞: AAA Ìå®ÌÑ¥ (Arrange-Act-Assert)
Î™®Îì† ÌÖåÏä§Ìä∏ ÏΩîÎìúÎäî **AAA Ìå®ÌÑ¥**ÏùÑ ÏóÑÍ≤©Ìûà Ï§ÄÏàòÌï¥Ïïº Ìï©ÎãàÎã§.
ÏΩîÎìú ÎÇ¥Ïóê Ï£ºÏÑùÏúºÎ°ú Îã®Í≥ÑÎ•º Î™ÖÏãúÌïòÎ©¥ Í∞ÄÎèÖÏÑ±Ïù¥ Ï¢ãÏïÑÏßëÎãàÎã§.

1.  **Arrange (Ï§ÄÎπÑ)**: ÌÖåÏä§Ìä∏Ìï† Í∞ùÏ≤¥Î•º ÏÉùÏÑ±ÌïòÍ≥†, ÌïÑÏöîÌïú Îç∞Ïù¥ÌÑ∞ÎÇò ÏÉÅÌÉúÎ•º ÏÑ§Ï†ïÌï©ÎãàÎã§. **`beforeEach` ÏÇ¨Ïö©ÏùÄ ÏßÄÏñë**ÌïòÍ≥†, Í∞Å ÌÖåÏä§Ìä∏ ÎÇ¥Î∂ÄÏóêÏÑú Î™ÖÏãúÏ†ÅÏúºÎ°ú Ï§ÄÎπÑ ÏûëÏóÖÏùÑ ÏàòÌñâÌïòÍ±∞ÎÇò **Fixture/Factory Ìï®Ïàò**Î•º ÏÇ¨Ïö©ÌïòÏó¨ ÌïÑÏöîÌïú Í∞ùÏ≤¥Î•º ÏÉùÏÑ±ÌïòÏÑ∏Ïöî. Ïù¥Îäî ÌÖåÏä§Ìä∏ Í∞ÑÏùò Í≤∞Ìï©ÎèÑÎ•º ÎÇÆÏ∂îÍ≥† Í∞Å ÌÖåÏä§Ìä∏Ïùò ÎèÖÎ¶ΩÏÑ±Í≥º Í∞ÄÎèÖÏÑ±ÏùÑ ÎÜíÏûÖÎãàÎã§.
2.  **Act (Ïã§Ìñâ)**: ÌÖåÏä§Ìä∏ ÎåÄÏÉÅ(SUT)Ïùò Î©îÏÑúÎìúÎ•º Ìò∏Ï∂úÌïòÍ±∞ÎÇò Î°úÏßÅÏùÑ Ïã§ÌñâÌï©ÎãàÎã§.
3.  **Assert (Í≤ÄÏ¶ù)**: Ïã§Ìñâ Í≤∞Í≥ºÍ∞Ä Í∏∞ÎåÄÌïú ÏÉÅÌÉúÏôÄ ÏùºÏπòÌïòÎäîÏßÄ ÌôïÏù∏Ìï©ÎãàÎã§.

### ‚ùå ÎÇòÏÅú Í≤ÄÏ¶ù Ïòà (Weak Assertion)
```typescript
// Îã®ÏàúÌûà Í∞úÏàòÎßå ÌôïÏù∏ÌïòÎ©¥, ÏûòÎ™ªÎêú Îç∞Ïù¥ÌÑ∞Í∞Ä Îì§Ïñ¥ÏûàÏñ¥ÎèÑ ÌÖåÏä§Ìä∏Í∞Ä ÌÜµÍ≥ºÎê† Ïàò ÏûàÏùå
expect(result.length).toBe(2); 
```

### ‚≠ï Ï¢ãÏùÄ Í≤ÄÏ¶ù Ïòà (Strong Assertion)
```typescript
// Ïã§Ï†ú Î∞òÌôòÎêú Îç∞Ïù¥ÌÑ∞Í∞Ä Í∏∞ÎåÄÌïú Îç∞Ïù¥ÌÑ∞ÏÖãÍ≥º Ï†ïÌôïÌûà ÏùºÏπòÌïòÎäîÏßÄ ÌôïÏù∏.
// Ïù¥Îïå, Arrange Îã®Í≥ÑÏùò Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÍ≥µ(slice, map Îì±)Ìï¥ÏÑú Í∏∞ÎåÄÍ∞íÏúºÎ°ú Ïì∞ÏßÄ ÎßêÍ≥†, 
// Ïã§Ï†ú Í∏∞ÎåÄÌïòÎäî Íµ¨Ï≤¥Ï†ÅÏù∏ Í∞í(Literal)ÏùÑ ÏßÅÏ†ë ÏûëÏÑ±ÌïòÏó¨ ÎπÑÍµêÌïòÏÑ∏Ïöî.
expect(result).toEqual([
  { id: 1, name: "User1" },
  { id: 2, name: "User2" }
]);
```

```typescript
it("ÌöåÏõê Í∞ÄÏûÖ ÏÑ±Í≥µ Ïãú Ïú†Ï†Ä Ï†ïÎ≥¥Î•º Î∞òÌôòÌï¥Ïïº ÌïúÎã§", async () => {
  // Arrange (Ï§ÄÎπÑ)
  const userRepo = new InMemoryUserRepository();
  const service = new AuthService(userRepo);
  const email = "test@example.com";

  // Act (Ïã§Ìñâ)
  const result = await service.signup(email);

  // Assert (Í≤ÄÏ¶ù)
  expect(result.email).toBe(email);
  expect(await userRepo.findByEmail(email)).not.toBeNull();
});
```
